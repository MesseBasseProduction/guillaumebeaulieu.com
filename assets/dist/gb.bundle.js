!function(){"use strict";var e={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function t(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,"string");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}var i=["de","en","es","fr","ja","pt"],a=function(){return e=function e(){var n=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this._lang=localStorage.getItem("website-lang"),null===this._lang&&(this._lang=-1!==i.indexOf(navigator.language.substring(0,2))?navigator.language.substring(0,2):"en",localStorage.setItem("website-lang",this._lang)),this._nls=null,this._info=null,this._mainScroll=null,this._version="1.0.2",this._initLang().then(this._fetchArtistInfo.bind(this)).then(this._buildPage.bind(this)).then(this._events.bind(this)).then(this._finalizeInit.bind(this)).catch((function(e){console.error("guillaumebeaulieu.com v".concat(n._version," : Fatal error during initialization, please contact support :\n"),e)})).finally((function(){}))},n=[{key:"_initLang",value:function(){var e=this;return new Promise((function(n,t){fetch("assets/json/".concat(e._lang,".json")).then((function(o){o.json().then((function(t){e._nls=t;for(var o=document.getElementById("lang-select"),i=0;i<o.children.length;++i)o.children[i].innerHTML=e._nls.lang[o.children[i].value],o.children[i].value===e._lang&&o.children[i].setAttribute("selected",!0);document.querySelector("#nls-nav-biography").innerHTML=e._nls.nav.biography,document.querySelector("#nls-nav-biography").href="/".concat(e._nls.pages.biography),document.querySelector("#nls-nav-programs").innerHTML=e._nls.nav.programs,document.querySelector("#nls-nav-programs").href="/".concat(e._nls.pages.programs),document.querySelector("#nls-nav-discography").innerHTML=e._nls.nav.discography,document.querySelector("#nls-nav-discography").href="/".concat(e._nls.pages.discography),document.querySelector("#nls-nav-medias").innerHTML=e._nls.nav.medias,document.querySelector("#nls-nav-medias").href="/".concat(e._nls.pages.medias),document.querySelector("#nls-nav-links").innerHTML=e._nls.nav.links,document.querySelector("#nls-nav-links").href="/".concat(e._nls.pages.links),o.addEventListener("change",(function(e){localStorage.setItem("website-lang",e.target.value),window.location.reload()})),n()})).catch((function(e){t(e)}))})).catch((function(e){t(e)}))}))}},{key:"_fetchArtistInfo",value:function(){var e=this;return new Promise((function(n,t){fetch("assets/json/info.json").then((function(o){o.json().then((function(t){e._info=t,n()})).catch((function(e){t(e)}))})).catch((function(e){t(e)}))}))}},{key:"_buildPage",value:function(){var e=this;return new Promise((function(n){document.querySelector("#info-modal").addEventListener("click",e._infoModal.bind(e)),"biography"===document.body.dataset.type?e._buildBiographyPage():"programs"===document.body.dataset.type?e._buildProgramsPage():"discography"===document.body.dataset.type?e._buildDiscographyPage():"medias"===document.body.dataset.type?e._buildMediasPage():"links"===document.body.dataset.type?e._buildLinksPage():e._build404Page(),n()}))}},{key:"_buildBiographyPage",value:function(){var e=this;document.title="Guillaume Beaulieu | ".concat(this._nls.nav.biography),document.querySelector("#nls-bio-short").innerHTML=this._info.bio.short[this._lang],document.querySelector("#nls-bio-content1").innerHTML=this._info.bio.full[this._lang],document.querySelector("#nls-bio-find-online").innerHTML=this._nls.biography.findOnline;for(var n=document.querySelector("#photo-select").children,t=function(t){n[t].addEventListener("click",(function(){for(var o=0;o<n.length;++o)n[o].classList.remove("active");n[t].classList.add("active"),document.querySelector("#artist-picture-path").src="/assets/img/artists/".concat(e._info.pictures.path[t]),document.querySelector("#artist-picture-author").textContent=e._info.pictures.author[t]}))},o=0;o<n.length;++o)t(o)}},{key:"_buildProgramsPage",value:function(){var e=this;document.title="Guillaume Beaulieu | ".concat(this._nls.nav.programs),document.querySelector("#nls-programs-description").innerHTML=this._nls.programs.description,document.querySelector("#nls-programs-contact").innerHTML=this._nls.programs.contact;for(var n=function(n){var t=document.createElement("DIV");t.classList.add("event"),t.innerHTML='\n        <img src="/assets/img/programs/'.concat(e._info.programs[n].image,'" alt="program-image">\n        <div>\n          <h3>').concat(e._info.programs[n].title[e._lang],"</h3>\n          <p>").concat(e._info.programs[n].description[e._lang],"</p>\n        </div>\n      "),document.querySelector("#programs-wrapper").appendChild(t),t.addEventListener("click",(function(){var t=document.createElement("A");t.href="/assets/doc/".concat(e._info.programs[n].path),t.download="".concat(e._info.programs[n].path),t.dispatchEvent(new MouseEvent("click"))}))},t=0;t<this._info.programs.length;++t)n(t)}},{key:"_buildDiscographyPage",value:function(){document.title="Guillaume Beaulieu | ".concat(this._nls.nav.discography),document.querySelector("#nls-disco-description").innerHTML=this._nls.discography.description;for(var e=0;e<this._info.releases.length;++e){var n=document.createElement("DIV");n.classList.add("release"),n.innerHTML='\n        <img src="/assets/img/releases/'.concat(this._info.releases[e].cover,'" alt="release-image">\n        <h1>').concat(this._info.releases[e].title,"</h1>\n        <h2>").concat(this._info.releases[e].artist,"</h2>\n      "),document.querySelector("#releases-wrapper").appendChild(n),n.addEventListener("click",this._releaseModal.bind(this,e))}}},{key:"_buildMediasPage",value:function(){document.title="Guillaume Beaulieu | ".concat(this._nls.nav.medias),document.querySelector("#nls-medias-description").innerHTML=this._nls.medias.description,document.querySelector("#nls-medias-link").innerHTML=this._nls.medias.link;for(var e=0;e<this._info.medias.length;++e){var n=new Intl.DateTimeFormat(this._lang,{year:"numeric",month:"long",day:"numeric"}).format(new Date(this._info.medias[e].date)),t=document.createElement("DIV");t.classList.add("media"),t.innerHTML='\n        <iframe src="'.concat(this._info.medias[e].url,'" title="').concat(this._info.medias[e].title,'" allowfullscreen="" sandbox="allow-same-origin allow-scripts allow-popups" frameborder="0"></iframe>\n        <h2>').concat(this._info.medias[e].title,"</h2>\n        <h3>").concat(n,"</h3>\n      "),document.querySelector("#medias-wrapper").appendChild(t),t.addEventListener("click",this._watchMediaModal.bind(this,e))}}},{key:"_buildLinksPage",value:function(){document.title="Guillaume Beaulieu | ".concat(this._nls.nav.links),document.querySelector("#nls-links-description").innerHTML=this._nls.links.description,document.querySelector("#nls-links-contact").innerHTML=this._nls.links.contact;for(var e=0;e<this._info.links.length;++e){var n=document.createElement("A");n.href=this._info.links[e].url,n.setAttribute("target","_blank"),n.setAttribute("rel","noopener"),n.classList.add("link"),n.innerHTML='\n        <img src="/assets/img/logo/'.concat(this._info.links[e].type,'.svg" alt="release-image">\n        <h1>').concat(this._nls.links[this._info.links[e].type],"</h1>\n      "),document.querySelector("#links-wrapper").appendChild(n)}}},{key:"_build404Page",value:function(){document.title="Guillaume Beaulieu | ".concat(this._nls.nav.error404),document.querySelector("#nls-404-title").innerHTML=this._nls.page404.title,document.querySelector("#nls-404-description").innerHTML=this._nls.page404.description}},{key:"_events",value:function(){document.getElementById("modal-overlay").addEventListener("click",this._closeModal.bind(this))}},{key:"_finalizeInit",value:function(){var e=this;return new Promise((function(n){document.querySelector("#loading-overlay").style.opacity=0,setTimeout((function(){document.querySelector("#loading-overlay").style.display="none",e._mainScroll=new window.ScrollBar({target:document.body,style:{color:"white"}}),requestAnimationFrame((function(){e._mainScroll.updateScrollbar(),n()}))}),400)}))}},{key:"_infoModal",value:function(){var e=this,n=document.getElementById("modal-overlay");fetch("assets/html/modal/infomodal.html").then((function(t){n.style.display="flex",t.text().then((function(t){var o=document.createRange().createContextualFragment(t);o.querySelector("#nls-modal-title").innerHTML=e._nls.modal.info.title,o.querySelector("#nls-modal-content1").innerHTML=e._nls.modal.info.content1,o.querySelector("#nls-modal-content2").innerHTML=e._nls.modal.info.content2,o.querySelector("#nls-modal-content3").innerHTML=e._nls.modal.info.content3,o.querySelector("#close-modal-button").innerHTML=e._nls.close,n.appendChild(o),setTimeout((function(){return n.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_releaseModal",value:function(e){var n=this,t=document.getElementById("modal-overlay");fetch("assets/html/modal/releasemodal.html").then((function(o){t.style.display="flex",o.text().then((function(o){var i=new Intl.DateTimeFormat(n._lang,{year:"numeric",month:"long",day:"numeric"}).format(new Date(n._info.releases[e].date)),a=document.createRange().createContextualFragment(o);a.querySelector("#release-title").innerHTML=n._info.releases[e].title,a.querySelector("#release-cover").src="/assets/img/releases/".concat(n._info.releases[e].cover),a.querySelector("#release-performer").innerHTML="".concat(n._nls.modal.release.discFrom," <i>").concat(n._info.releases[e].artist,"</i>"),a.querySelector("#release-publisher").innerHTML="".concat(n._nls.modal.release.publishedOn," ").concat(i," ").concat(n._nls.modal.release.publishedBy,' <a href="').concat(n._info.releases[e].labelLink,'" target="_blank" rel="noopener" alt="label-link">').concat(n._info.releases[e].label,"</a>"),a.querySelector("#release-duration").innerHTML="".concat(n._info.releases[e].tracks," ").concat(n._nls.modal.release.tracks," – ").concat(n._info.releases[e].duration),a.querySelector("#close-modal-button").innerHTML=n._nls.close;for(var r=0;r<n._info.releases[e].links.length;++r){var l=document.createElement("A");l.href=n._info.releases[e].links[r].url,l.classList.add("link"),l.setAttribute("target","_blank"),l.setAttribute("rel","noopener"),l.innerHTML='\n            <img src="/assets/img/logo/'.concat(n._info.releases[e].links[r].type,'.svg" alt="link-icon">\n            <p>').concat(n._nls.links[n._info.releases[e].links[r].type],"</p>\n          "),a.querySelector("#release-links").appendChild(l)}new window.ScrollBar({target:a.querySelector("#modal-content"),style:{color:"white"}}),t.appendChild(a),setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_watchMediaModal",value:function(e){var n=this,t=document.getElementById("modal-overlay");fetch("assets/html/modal/watchmediamodal.html").then((function(o){t.style.display="flex",o.text().then((function(o){var i=document.createRange().createContextualFragment(o);i.querySelector("#iframe-object").src=n._info.medias[e].url,i.querySelector("#iframe-object").title=n._info.medias[e].title,t.appendChild(i),setTimeout((function(){return t.style.opacity=1}),50)}))})).catch((function(e){return console.error(e)}))}},{key:"_closeModal",value:function(e){if("modal-overlay"===e.srcElement.id||"close-modal"===e.srcElement.className){var n=document.getElementById("modal-overlay");"flex"===n.style.display&&(n.style.opacity=0,setTimeout((function(){n.innerHTML="",n.style=""}),400))}}}],n&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();e.default=a,window.gb=e.default}();